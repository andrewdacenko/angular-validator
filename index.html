<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>ng-validator by andrewdacenko</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>ng-validator</h1>
        <h2>Angular validation helper class</h2>
        <a href="https://github.com/andrewdacenko/ng-validator" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a id="ng-validator" class="anchor" href="#ng-validator" aria-hidden="true"><span class="octicon octicon-link"></span></a>ng-validator</h1>

<p>Angular validation helper class</p>

<h1>
<a id="how-to-install" class="anchor" href="#how-to-install" aria-hidden="true"><span class="octicon octicon-link"></span></a>How to install</h1>

<div class="highlight highlight-sh"><pre>bower install ng-validator --save</pre></div>

<h1>
<a id="how-to-use" class="anchor" href="#how-to-use" aria-hidden="true"><span class="octicon octicon-link"></span></a>How to use</h1>

<p>Include it as dependency </p>

<div class="highlight highlight-javascript"><pre><span class="nx">angular</span><span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'myApp'</span><span class="p">,</span> <span class="p">[</span><span class="s1">'ngValidator'</span><span class="p">]);</span></pre></div>

<p>Inject in Controller / Service / Whatever </p>

<div class="highlight highlight-javascript"><pre><span class="nx">AppController</span><span class="p">.</span><span class="nx">$inject</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Validator'</span><span class="p">];</span>

<span class="kd">function</span> <span class="nx">AppController</span> <span class="p">(</span><span class="nx">Validator</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">self</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span>

  <span class="nx">self</span><span class="p">.</span><span class="nx">input</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">title</span><span class="o">:</span> <span class="s1">''</span><span class="p">,</span>
    <span class="nx">description</span><span class="o">:</span> <span class="s1">''</span><span class="p">,</span>
    <span class="nx">agree</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nx">reason</span><span class="o">:</span> <span class="s1">''</span>
  <span class="p">};</span>

  <span class="nx">self</span><span class="p">.</span><span class="nx">errors</span> <span class="o">=</span> <span class="p">{};</span>

  <span class="nx">self</span><span class="p">.</span><span class="nx">submit</span> <span class="o">=</span> <span class="nx">submit</span><span class="p">;</span>

  <span class="kd">var</span> <span class="nx">rules</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">title</span><span class="o">:</span> <span class="s1">'required'</span><span class="p">,</span>
    <span class="nx">description</span><span class="o">:</span> <span class="s1">'required_with:title'</span><span class="p">,</span>
    <span class="nx">agree</span><span class="o">:</span> <span class="s1">'required'</span><span class="p">,</span>
    <span class="nx">reason</span><span class="o">:</span> <span class="s1">'required_with:title|required_if:agree,0'</span>
  <span class="p">}</span>

  <span class="kd">var</span> <span class="nx">customMessages</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">'description.required_with'</span><span class="o">:</span> <span class="s1">'Field needs to be filled if title present'</span><span class="p">,</span>
    <span class="s1">'reason.required_with'</span><span class="o">:</span> <span class="s1">'Please provide reason'</span><span class="p">,</span>
    <span class="s1">'reason.required_if'</span><span class="o">:</span> <span class="s1">'Please provide reason'</span><span class="p">,</span>
  <span class="p">}</span>

  <span class="kd">function</span> <span class="nx">submit</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">self</span><span class="p">.</span><span class="nx">errors</span> <span class="o">=</span> <span class="p">{};</span>

    <span class="kd">var</span> <span class="nx">validator</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Validator</span><span class="p">(</span><span class="nx">self</span><span class="p">.</span><span class="nx">input</span><span class="p">,</span> <span class="nx">rules</span><span class="p">,</span> <span class="nx">customMessages</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">validator</span><span class="p">.</span><span class="nx">fails</span><span class="p">())</span> <span class="p">{</span>
      <span class="k">for</span> <span class="p">(</span><span class="kd">var</span> <span class="nx">field</span> <span class="k">in</span> <span class="nx">validator</span><span class="p">.</span><span class="nx">errors</span><span class="p">.</span><span class="nx">all</span><span class="p">())</span> <span class="p">{</span>
          <span class="nx">self</span><span class="p">.</span><span class="nx">errors</span><span class="p">[</span><span class="nx">field</span><span class="p">]</span> <span class="o">=</span> <span class="nx">validator</span><span class="p">.</span><span class="nx">errors</span><span class="p">.</span><span class="nx">first</span><span class="p">(</span><span class="nx">field</span><span class="p">);</span>
      <span class="p">};</span>  
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>

<p>Show errors in template</p>

<div class="highlight highlight-html"><pre><span class="nt">&lt;div</span> <span class="na">ng-controller=</span><span class="s">"AppController as app"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;form</span> <span class="na">ng-submit=</span><span class="s">"app.submit()"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span> <span class="na">ng-class=</span><span class="s">"{'has-error': app.errors.title}"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"form-label"</span><span class="nt">&gt;</span>Title<span class="nt">&lt;/label&gt;</span>
      <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">"form-control"</span> <span class="na">ng-model=</span><span class="s">"app.input.title"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"help-block"</span> <span class="na">ng-if=</span><span class="s">"app.errors.title"</span> <span class="na">ng-bind=</span><span class="s">"app.errors.title"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;button</span> <span class="na">class=</span><span class="s">"btn btn-primary"</span><span class="nt">&gt;</span>Submit<span class="nt">&lt;/button&gt;</span>
  <span class="nt">&lt;/form&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>

<p>Or wrap it in simple directive</p>

<div class="highlight highlight-javascript"><pre><span class="nx">angular</span>
  <span class="p">.</span><span class="nx">module</span><span class="p">(</span><span class="s1">'myApp'</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">directive</span><span class="p">(</span><span class="s1">'inputValidation'</span><span class="p">,</span> <span class="nx">inputValidation</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">inputValidation</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">{</span>
    <span class="nx">restrict</span><span class="o">:</span> <span class="s1">'E'</span><span class="p">,</span>
    <span class="nx">scope</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">field</span><span class="o">:</span> <span class="s1">'@'</span><span class="p">,</span>
      <span class="nx">parent</span><span class="o">:</span> <span class="s1">'='</span>
    <span class="p">},</span>
    <span class="nx">templateUrl</span><span class="o">:</span> <span class="s1">'templates/inputValidation.html'</span><span class="p">,</span>
    <span class="nx">link</span><span class="o">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">scope</span><span class="p">,</span> <span class="nx">elem</span><span class="p">,</span> <span class="nx">attr</span><span class="p">)</span> <span class="p">{}</span>
  <span class="p">}</span>
<span class="p">};</span>
</pre></div>

<p>Create template</p>

<div class="highlight highlight-html"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"form-group"</span> <span class="na">ng-class=</span><span class="s">"{'has-error': parent.errors[field]}"</span><span class="nt">&gt;</span>
  <span class="nt">&lt;label</span> <span class="na">class=</span><span class="s">"form-label"</span> <span class="na">ng-bind=</span><span class="s">"field"</span><span class="nt">&gt;&lt;/label&gt;</span>
  <span class="nt">&lt;input</span> <span class="na">class=</span><span class="s">"form-control"</span> 
         <span class="na">ng-model=</span><span class="s">"parent.input[field]"</span>
         <span class="na">ng-change=</span><span class="s">"parent.errors[field] = null"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"help-block"</span> 
        <span class="na">ng-if=</span><span class="s">"parent.errors[field]"</span> 
        <span class="na">ng-bind=</span><span class="s">"parent.errors[field]"</span><span class="nt">&gt;&lt;/span&gt;</span>
<span class="nt">&lt;/div&gt;</span>
</pre></div>

<p>And use as</p>

<div class="highlight highlight-html"><pre><span class="nt">&lt;input-validation</span> <span class="na">parent=</span><span class="s">"app"</span> <span class="na">field=</span><span class="s">"title"</span><span class="nt">&gt;&lt;/input-validation&gt;</span></pre></div>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/andrewdacenko/ng-validator/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/andrewdacenko/ng-validator/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/andrewdacenko/ng-validator"></a> is maintained by <a href="https://github.com/andrewdacenko">andrewdacenko</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

  
  </body>
</html>
